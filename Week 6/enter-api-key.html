<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
    </head>

    <body>
        <div >please enter a valid API Key </div>
        <form>
        <input type="text" id="apiKeyInput" name="apiKey" />
        <button id="submitApiKey">Save API</button>
        </form>
        <href>
            <a href="index.html">Go to Contacts</a>
        <script>

            let rootPath = "http://mysite.itvarsity.org/api/ContactBook/";
            document.getElementById("submitApiKey").addEventListener("click", setApiKey); 
           
            function setApiKey(e) {
                e.preventDefault();
                let apiKey = document.getElementById("apiKeyInput").value;
                fetch(rootPath + "controller/?apikey=" + apiKey)
                .then(function(response){
                    return response.text();
                })
                .then(function(data) {

                    if (data== "1") {
                        localStorage.setItem("apiKey", apiKey);
                        window.open("index.html", "_self");
                    } else {
                        alert(data+ " is not a valid API Key");
                    }
                })
            }
        
       
        </script>
    </body>
</html>